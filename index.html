<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>AI Translator Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
    --bg:#0f172a;
    --card:#ffffff;
    --primary:#2563eb;
    --secondary:#22c55e;
    --text:#0f172a;
    --muted:#64748b;
    --radius:18px;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:"Inter",system-ui,sans-serif;}
body{min-height:100vh;background:radial-gradient(circle at top,#1e3a8a,#020617);display:flex;justify-content:center;align-items:center;}
.app{background:var(--card);width:95%;max-width:1000px;border-radius:var(--radius);padding:22px;box-shadow:0 40px 80px rgba(0,0,0,.45);animation:fade .6s ease;}
@keyframes fade{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;}
.logo{font-size:22px;font-weight:800;color:var(--primary);}
.badge{font-size:12px;padding:6px 10px;border-radius:999px;background:#e0e7ff;color:#3730a3;}
.controls{display:flex;gap:10px;margin-bottom:12px;}
select{flex:1;padding:12px;border-radius:12px;border:1px solid #e5e7eb;font-size:14px;background:#f9fafb;}
select:focus{outline:none;border-color:var(--primary);}
.swap{width:48px;border:none;border-radius:12px;background:var(--primary);color:white;font-size:18px;cursor:pointer;transition:.2s;}
.swap:hover{opacity:.85;}
.boxes{display:grid;grid-template-columns:1fr 1fr;gap:14px;position:relative;}
textarea{width:100%;height:190px;border-radius:14px;padding:16px;border:1px solid #e5e7eb;font-size:15px;resize:none;background:#f9fafb;}
textarea:focus{outline:none;border-color:var(--primary);background:white;}
.suggestions{font-size:14px;color:#334155;display:flex;flex-wrap:wrap;gap:4px;margin-top:4px;}
.suggestions span{display:inline-block;background:#e0e7ff;color:#1e3a8a;padding:4px 8px;border-radius:8px;cursor:pointer;transition:.2s;}
.suggestions span:hover{background:#c7d2fe;}
.actions{display:flex;gap:12px;margin-top:14px;}
.btn{flex:1;padding:14px;border:none;border-radius:14px;font-size:15px;cursor:pointer;transition:.2s;}
.translate{background:linear-gradient(135deg,var(--primary),#1d4ed8);color:white;}
.copy{background:linear-gradient(135deg,var(--secondary),#16a34a);color:white;}
.btn:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(0,0,0,.15);}
.footer{text-align:center;font-size:13px;margin-top:12px;color:var(--muted);}
@media(max-width:800px){.boxes{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="app">
    <div class="header">
        <div class="logo">AI Translator</div>
        <div class="badge">PRO</div>
    </div>

    <div class="controls">
        <select id="from"></select>
        <button class="swap" id="swapBtn">⇄</button>
        <select id="to"></select>
    </div>

    <div class="boxes">
        <div style="position:relative;">
            <textarea id="input" placeholder="اكتب النص هنا..."></textarea>
            <div id="suggestions" class="suggestions"></div>
        </div>
        <textarea id="output" placeholder="الترجمة..." readonly></textarea>
    </div>

    <div class="actions">
        <button class="btn copy" id="copyBtn">نسخ</button>
        <button class="btn translate" id="translateBtn">ترجمة</button>
    </div>

    <div class="footer">All Languages • LibreTranslate & LanguageTool</div>
</div>

<script>
// ===== LANGUAGES =====
const langs = {
    af:"Afrikaans", sq:"Albanian", am:"Amharic", ar:"Arabic",
    en:"English", fr:"French", es:"Spanish", de:"German",
    it:"Italian", ru:"Russian", zh:"Chinese", ja:"Japanese",
    ko:"Korean", pt:"Portuguese", tr:"Turkish", hi:"Hindi",
    fa:"Persian", ur:"Urdu", nl:"Dutch", sv:"Swedish",
    no:"Norwegian", da:"Danish", fi:"Finnish", el:"Greek",
    he:"Hebrew", th:"Thai", vi:"Vietnamese", id:"Indonesian",
    ms:"Malay", cs:"Czech", hu:"Hungarian", pl:"Polish"
};

// ===== ELEMENTS =====
const from = document.getElementById("from");
const to = document.getElementById("to");
const input = document.getElementById("input");
const output = document.getElementById("output");
const swapBtn = document.getElementById("swapBtn");
const copyBtn = document.getElementById("copyBtn");
const translateBtn = document.getElementById("translateBtn");
const suggestionsBox = document.getElementById("suggestions");

// ===== INIT LANGUAGES =====
for (let l in langs) {
    from.innerHTML += `<option value="${l}">${langs[l]}</option>`;
    to.innerHTML += `<option value="${l}">${langs[l]}</option>`;
}
from.value="en";
to.value="ar";

// ===== FUNCTIONS =====
function swapLang(){ [from.value,to.value]=[to.value,from.value]; }

async function checkSpelling(text, lang){
    suggestionsBox.innerHTML="";
    if(!text) return;
    try{
        const res = await fetch("https://api.languagetool.org/v2/check",{
            method:"POST",
            headers:{"Content-Type":"application/x-www-form-urlencoded"},
            body:`text=${encodeURIComponent(text)}&language=${lang}`
        });
        const data = await res.json();
        data.matches.forEach(match=>{
            match.replacements.slice(0,3).forEach(rep=>{
                const span=document.createElement("span");
                span.textContent=rep.value;
                span.onclick=()=>{
                    input.value = input.value.slice(0,match.offset)+rep.value+input.value.slice(match.offset+match.length);
                    suggestionsBox.innerHTML="";
                };
                suggestionsBox.appendChild(span);
            });
        });
    }catch(e){console.log("Spell check failed", e);}
}

async function translateText(){
    const text=input.value.trim();
    if(!text) return alert("اكتب نصًا");
    output.value="جاري الترجمة...";
    try{
        const res = await fetch("https://libretranslate.de/translate",{
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body:JSON.stringify({q:text,source:from.value,target:to.value,format:"text"})
        });
        const data = await res.json();
        output.value = data.translatedText;
    }catch(e){console.log(e); output.value="❌ فشل الاتصال";}
}

function copyText(){ navigator.clipboard.writeText(output.value); alert("تم النسخ ✔"); }

// ===== EVENTS =====
swapBtn.addEventListener("click",swapLang);
translateBtn.addEventListener("click",translateText);
copyBtn.addEventListener("click",copyText);

let typingTimer;
input.addEventListener("input",()=>{
    clearTimeout(typingTimer);
    typingTimer=setTimeout(()=>{
        checkSpelling(input.value, from.value==="auto"?"en-US":from.value);
    },600);
});
</script>
</body>
</html>
